import{u as $,c as n,j as e,r as h}from"./app-nMpo0nzv.js";import{D as L}from"./TabelData-Bq0KbQ7x.js";import{N as X}from"./Notification-4m9luinP.js";import{M as _}from"./ModalView-shfRxHOx.js";import{S as z}from"./SuperAdminLayouts--tQhjaE8.js";import{S as F}from"./StafLayouts-D4HfDRrx.js";import{U as J}from"./UniversalInput-DhhCC8MJ.js";import"./FormatWaktu-CaIpskCQ.js";import"./Breadcrump-BN6wmIl1.js";import"./index-BzCDgUCn.js";import"./TextEditor-BFB8hSX5.js";/* empty css                  */function Q({auth:m,siswas:u,siswaPaginate:i,kelasList:I,selectedKelas:j="",searchQuery:D=""}){const{props:f}=$(),[k,v]=n.useState([]),[N,p]=n.useState(null),[B,c]=n.useState((i==null?void 0:i.currentPage)||1),[P,W]=n.useState((i==null?void 0:i.lastPage)||1),[S,M]=n.useState(D),[t,g]=n.useState(j),[b,R]=n.useState(!1),[K,E]=n.useState("");n.useEffect(()=>{if(!u)return;const a=u.map(s=>{var l,r;return{...s,id:s.nisn,fullName:((l=s==null?void 0:s.user)==null?void 0:l.fullName)||"-",email:((r=s==null?void 0:s.user)==null?void 0:r.email)||"-"}});v(a)},[u]);const d=f.pattern,A=a=>{g(a),c(1),h.get(d,{page:1,kelas:a,search:S},{preserveState:!0,replace:!0})},T=()=>{g(""),c(1),h.get(d,{page:1,kelas:"",search:S},{preserveState:!0,replace:!0})},U=a=>{h.get(d,{page:a,kelas:t,search:S},{preserveState:!0,replace:!0,preserveScroll:!0}),c(a)},V=a=>{M(a),h.get(d,{page:1,kelas:t,search:a},{preserveState:!0,replace:!0,preserveScroll:!0}),c(1)},y=[{header:"No.",accessor:"nomor_absen"},{header:"NISN",accessor:"nisn"},{header:"Nama Lengkap",accessor:"fullName"},{header:"Jenis Kelamin",accessor:"jenisKelamin"},{header:"Kelas",accessor:"nama_kelas"}],x=String(f.pattern).split("/"),w=a=>{const[s,l,r]=a.split("-");return{tingkatNum:{X:1,XI:2,XII:3}[s]||99,tingkat:s,jurusan:l,nomor:parseInt(r),original:a}},G=a=>[...a].sort((s,l)=>{const r=w(s.namaKelas),o=w(l.namaKelas);return r.tingkatNum!==o.tingkatNum?r.tingkatNum-o.tingkatNum:r.jurusan!==o.jurusan?r.jurusan.localeCompare(o.jurusan):r.nomor-o.nomor}),C=((a,s)=>{const l=G(a);return s?l.filter(r=>r.namaKelas.toLowerCase().includes(s.toLowerCase())):l})(I,K);return e.jsxDEV("div",{className:"max-w-7xl mx-auto lg:p-6",children:[e.jsxDEV(X,{},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:144,columnNumber:7},this),e.jsxDEV("div",{className:"mb-6 flex justify-center md:justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Manajemen Data Siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:149,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Daftar seluruh siswa berdasarkan kelas di sekolah."},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:150,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:148,columnNumber:9},this),e.jsxDEV("a",{href:`/${x[1]}/${x[2]}/export?kelasQ=${t}`,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:["Export Siswa ",t]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:154,columnNumber:9},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:147,columnNumber:7},this),e.jsxDEV("div",{className:"mb-8",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("button",{type:"button",onClick:()=>{R(!b)},className:"text-lg flex items-center gap-2 font-semibold text-gray-900 dark:text-white",children:["Pilih Kelas ",e.jsxDEV("i",{className:b?"fas fa-caret-up":"fas fa-caret-down"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:172,columnNumber:25},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:165,columnNumber:11},this),t&&e.jsxDEV("button",{onClick:T,className:"text-blue-600 hover:text-blue-800 font-medium text-sm",children:"Lihat Semua Siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:175,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:164,columnNumber:9},this),e.jsxDEV("div",{className:"",children:b&&e.jsxDEV("div",{children:[e.jsxDEV(J,{name:"searchKelas",value:K,placeholder:"Cari Kelas",onChange:a=>{E(a)},type:"text"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:187,columnNumber:15},this),e.jsxDEV("div",{className:"mt-5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:C.map(a=>e.jsxDEV("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow border p-4 cursor-pointer transition-all duration-200 ${t===a.namaKelas?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:shadow-md"}`,onClick:()=>A(a.namaKelas),children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h3",{className:"font-bold text-gray-900 dark:text-white",children:a.namaKelas},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:208,columnNumber:23},this),e.jsxDEV("div",{className:"text-lg",children:"ðŸ«"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:209,columnNumber:23},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:207,columnNumber:21},this),e.jsxDEV("div",{className:"mt-2",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.jumlahSiswa},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:213,columnNumber:23},this),e.jsxDEV("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:216,columnNumber:23},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:212,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm text-gray-700 dark:text-gray-100 mt-2 flex flex-col",children:["Wali Kelas:"," ",e.jsxDEV("span",{className:"bg-yellow-600 rounded-full px-2 py-1 text-white text-nowrap text-xs",children:a.waliKelas},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:220,columnNumber:23},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:218,columnNumber:21},this),e.jsxDEV("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxDEV("div",{className:`text-sm font-medium ${t===a.namaKelas?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:t===a.namaKelas?"âœ“ Sedang dipilih":"Pilih kelas â†’"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:226,columnNumber:23},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:225,columnNumber:21},this)]},a.namaKelas,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:198,columnNumber:19},this))},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:196,columnNumber:15},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:186,columnNumber:13},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:184,columnNumber:9},this),I.length===0&&e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV("div",{className:"text-gray-400 dark:text-gray-500 text-4xl mb-3",children:"ðŸ«"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:248,columnNumber:13},this),e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Belum ada data kelas"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:249,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-500 dark:text-gray-400",children:"Data kelas belum tersedia, tambahkan melalui menu manajemen kelas."},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:252,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:247,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:163,columnNumber:7},this),e.jsxDEV(L,{data:k,tabelName:t?`Siswa ${t}`:"Semua Data Siswa",columns:y,pageSize:15,placeholder:"Cari siswa...",noDataText:t?`Tidak ada siswa di kelas ${t}`:"Tidak ada data siswa ditemukan.",onRowClick:a=>p(a),serverPagination:{currentPage:B,lastPage:P,total:(i==null?void 0:i.total)||0,onPageChange:U},viewModal:!0,editable:`/${x[1]}/${x[2]}`,serverSearch:{value:S,onChange:V}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:260,columnNumber:7},this),N&&e.jsxDEV(_,{data:N,include:["fullName","nisn","jenisKelamin","tempatLahir","tanggalLahir","agama","nama_kelas","alamat"],open:!!N,onClose:()=>p(null),title:`Detail Siswa - ${N.fullName}`},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:288,columnNumber:9},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:143,columnNumber:5},this)}Q.layout=m=>(m.props.activeRole??m.props.user.role)=="Staf"?e.jsxDEV(F,{children:m},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:312,columnNumber:12},void 0):e.jsxDEV(z,{children:m},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:315,columnNumber:10},void 0);export{Q as default};
