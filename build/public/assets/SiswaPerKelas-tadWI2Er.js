import{u as y,c as i,j as e,r as S}from"./app-D-AlCsI9.js";import{D as A}from"./TabelData-DK3QOFq1.js";import{N as V}from"./Notification-DkVvHERy.js";import{M as G}from"./ModalView-DuQ8G--3.js";import{S as U}from"./SuperAdminLayouts-DDh0Gaam.js";import{S as C}from"./StafLayouts-DNWQaC5q.js";import"./FormatWaktu-CaIpskCQ.js";import"./Breadcrump-CQG3d_M-.js";function $({auth:l,siswas:n,siswaPaginate:t,kelasList:x,selectedKelas:w="",searchQuery:g=""}){const{props:b}=y(),[K,D]=i.useState([]),[m,h]=i.useState(null),[j,o]=i.useState((t==null?void 0:t.currentPage)||1),[v,L]=i.useState((t==null?void 0:t.lastPage)||1),[u,B]=i.useState(g),[s,f]=i.useState(w),[d,k]=i.useState(!1);i.useEffect(()=>{if(!n)return;const a=n.map(r=>{var I,p;return{...r,id:r.nisn,fullName:((I=r==null?void 0:r.user)==null?void 0:I.fullName)||"-",email:((p=r==null?void 0:r.user)==null?void 0:p.email)||"-"}});D(a)},[n]);const N=b.pattern,P=a=>{f(a),o(1),S.get(N,{page:1,kelas:a,search:u},{preserveState:!0,replace:!0})},R=()=>{f(""),o(1),S.get(N,{page:1,kelas:"",search:u},{preserveState:!0,replace:!0})},E=a=>{S.get(N,{page:a,kelas:s,search:u},{preserveState:!0,replace:!0,preserveScroll:!0}),o(a)},M=a=>{B(a),S.get(N,{page:1,kelas:s,search:a},{preserveState:!0,replace:!0,preserveScroll:!0}),o(1)},T=[{header:"No.",accessor:"nomor_absen"},{header:"NISN",accessor:"nisn"},{header:"Nama Lengkap",accessor:"fullName"},{header:"Jenis Kelamin",accessor:"jenisKelamin"},{header:"Kelas",accessor:"nama_kelas"}],c=String(b.pattern).split("/");return e.jsxDEV("div",{className:"max-w-7xl mx-auto lg:p-6",children:[e.jsxDEV(V,{},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:101,columnNumber:7},this),e.jsxDEV("div",{className:"mb-6 flex justify-center md:justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Manajemen Data Siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:106,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Daftar seluruh siswa berdasarkan kelas di sekolah."},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:107,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:105,columnNumber:9},this),e.jsxDEV("a",{href:`/${c[1]}/${c[2]}/export?kelasQ=${s}`,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:["Export Siswa ",s]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:111,columnNumber:9},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:104,columnNumber:7},this),e.jsxDEV("div",{className:"mb-8",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("button",{type:"button",onClick:()=>{k(!d)},className:"text-lg flex items-center gap-2 font-semibold text-gray-900 dark:text-white",children:["Pilih Kelas ",e.jsxDEV("i",{className:d?"fas fa-caret-up":"fas fa-caret-down"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:129,columnNumber:25},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:122,columnNumber:11},this),s&&e.jsxDEV("button",{onClick:R,className:"text-blue-600 hover:text-blue-800 font-medium text-sm",children:"Lihat Semua Siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:132,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:121,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:d&&x.map(a=>e.jsxDEV("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow border p-4 cursor-pointer transition-all duration-200 ${s===a.namaKelas?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:shadow-md"}`,onClick:()=>P(a.namaKelas),children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h3",{className:"font-bold text-gray-900 dark:text-white",children:a.namaKelas},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:154,columnNumber:19},this),e.jsxDEV("div",{className:"text-lg",children:"ðŸ«"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:155,columnNumber:19},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:153,columnNumber:17},this),e.jsxDEV("div",{className:"mt-2",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.jumlahSiswa},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:159,columnNumber:19},this),e.jsxDEV("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:162,columnNumber:19},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:158,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm text-gray-700 dark:text-gray-100 mt-2 flex flex-col",children:["Wali Kelas:"," ",e.jsxDEV("span",{className:"bg-yellow-600 rounded-full px-2 py-1 text-white text-nowrap text-xs",children:a.waliKelas},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:166,columnNumber:19},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:164,columnNumber:17},this),e.jsxDEV("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxDEV("div",{className:`text-sm font-medium ${s===a.namaKelas?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:s===a.namaKelas?"âœ“ Sedang dipilih":"Pilih kelas â†’"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:172,columnNumber:19},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:171,columnNumber:17},this)]},a.namaKelas,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:144,columnNumber:15},this))},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:141,columnNumber:9},this),x.length===0&&e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV("div",{className:"text-gray-400 dark:text-gray-500 text-4xl mb-3",children:"ðŸ«"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:189,columnNumber:13},this),e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Belum ada data kelas"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:190,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-500 dark:text-gray-400",children:"Data kelas belum tersedia, tambahkan melalui menu manajemen kelas."},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:193,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:188,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:120,columnNumber:7},this),e.jsxDEV(A,{data:K,tabelName:s?`Siswa ${s}`:"Semua Data Siswa",columns:T,pageSize:15,placeholder:"Cari siswa...",noDataText:s?`Tidak ada siswa di kelas ${s}`:"Tidak ada data siswa ditemukan.",onRowClick:a=>h(a),serverPagination:{currentPage:j,lastPage:v,total:(t==null?void 0:t.total)||0,onPageChange:E},viewModal:!0,editable:`/${c[1]}/${c[2]}`,serverSearch:{value:u,onChange:M}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:201,columnNumber:7},this),m&&e.jsxDEV(G,{data:m,include:["fullName","nisn","jenisKelamin","tempatLahir","tanggalLahir","agama","nama_kelas","alamat"],open:!!m,onClose:()=>h(null),title:`Detail Siswa - ${m.fullName}`},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:229,columnNumber:9},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:100,columnNumber:5},this)}$.layout=l=>(l.props.activeRole??l.props.user.role)=="Staf"?e.jsxDEV(C,{children:l},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:253,columnNumber:12},void 0):e.jsxDEV(U,{children:l},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/SiswaPerKelas.tsx",lineNumber:256,columnNumber:10},void 0);export{$ as default};
