import{u as R,c as o,j as i,r as d}from"./app-D-AlCsI9.js";import{N as w}from"./Notification-DkVvHERy.js";import{D as A}from"./TabelData-DK3QOFq1.js";import{M as E}from"./ModalView-DuQ8G--3.js";import{S as M}from"./SuperAdminLayouts-DDh0Gaam.js";import{G}from"./GuruLayouts-D90zMq1r.js";import{S as K}from"./StafLayouts-DNWQaC5q.js";import"./FormatWaktu-CaIpskCQ.js";import"./Breadcrump-CQG3d_M-.js";function V({auth:t,pembayarans:s,pagination:r,filters:n}){const{props:N}=R(),b=N==null?void 0:N.pattern.split("/").filter(a=>a!=""),m=`/${b[0]}/${b[1]}`,[D,f]=o.useState([]),[P,p]=o.useState(),[h,j]=o.useState((r==null?void 0:r.currentPage)||1),[y,C]=o.useState((r==null?void 0:r.lastPage)||1),[u,x]=o.useState({search:(n==null?void 0:n.search)||"",jenisPembayaran:(n==null?void 0:n.jenisPembayaran)||""});o.useEffect(()=>{if(!s)return;const a=[];s==null||s.forEach(e=>{a.push({id:e.id,siswa:e.userName,nisn:e.nisn||"-",jenisPembayaran:e.jenisPembayaran,nominalPenetapan:l(e.nominalPenetapan),totalDibayar:l(e.totalDibayar),sisaPembayaran:l(e.sisaPembayaran),statusPartisipasi:e.partisipasiUjian?"Diizinkan":"Tidak Diizinkan",detailData:{id:e.id,siswa:e.userName,nisn:e.nisn||"-",jenisPembayaran:e.jenisPembayaran,nominalPenetapan:l(e.nominalPenetapan),totalDibayar:l(e.totalDibayar),sisaPembayaran:l(e.sisaPembayaran),statusPartisipasi:e.partisipasiUjian?"Diizinkan":"Tidak Diizinkan",partisipasiUjian:e.partisipasiUjian,createdAt:e.createdAt}})}),f(a)},[s]);const l=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),I=a=>{d.get(m,{page:a,...u},{preserveState:!0,replace:!0}),j(a)},S=a=>{d.get(m,{page:1,...u,search:a},{preserveState:!0,replace:!0,preserveScroll:!0}),j(1)},g=(a,e)=>{const c={...u,[a]:e};x(c),setTimeout(()=>{d.get(m,{...c},{preserveState:!0,replace:!0})},500)},U=(a,e)=>{d.post(`${m}/update-partisipasi-ujian`,{pembayaranId:a,partisipasiUjian:!e},{preserveScroll:!0})},k=["SPP","Uang Pangkal","Uang Daftar Ulang"],B=a=>a!=null&&a.detailData?{informasiPembayaran:{siswa:a.detailData.siswa,nisn:a.detailData.nisn,jenisPembayaran:a.detailData.jenisPembayaran,nominalPenetapan:a.detailData.nominalPenetapan,totalDibayar:a.detailData.totalDibayar,sisaPembayaran:a.detailData.sisaPembayaran,statusPartisipasi:a.detailData.statusPartisipasi,tanggalDibuat:a.detailData.createdAt}}:{},v=({status:a})=>{const e=a==="Diizinkan";return i.jsxDEV("span",{className:`inline-flex text-nowrap px-2 py-1 text-xs font-semibold rounded-full ${e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:169,columnNumber:7},this)},T=({row:a})=>{var c;const e=(c=a.detailData)==null?void 0:c.partisipasiUjian;return i.jsxDEV("button",{onClick:()=>U(a.id,e),className:`inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${e?"bg-yellow-600 text-white hover:bg-yellow-700":"bg-green-600 text-white hover:bg-green-700"}`,children:e?"Tolak":"Izinkan"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:183,columnNumber:7},this)};return i.jsxDEV("div",{className:"max-w-7xl mx-auto lg:p-6",children:[i.jsxDEV(w,{},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:198,columnNumber:7},this),i.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:i.jsxDEV("div",{children:[i.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Kelola Partisipasi Ujian"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:202,columnNumber:11},this),i.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Hanya menampilkan siswa dengan pembayaran belum lunas"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:205,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:201,columnNumber:9},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:200,columnNumber:7},this),i.jsxDEV("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-6 border border-purple-200 dark:border-purple-800",children:i.jsxDEV("div",{className:"flex flex-col md:flex-row gap-1 justify-between items-center",children:[i.jsxDEV("div",{className:"flex flex-wrap gap-4 items-center",children:i.jsxDEV("div",{children:[i.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-100 mb-2",children:"Jenis Pembayaran"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:216,columnNumber:15},this),i.jsxDEV("select",{value:u.jenisPembayaran,onChange:a=>g("jenisPembayaran",a.target.value),className:"block w-full pl-3 pr-10 py-2 border text-base dark:text-gray-50 border-purple-300 dark:bg-gray-700 dark:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 sm:text-sm rounded-md transition-colors duration-200",children:[i.jsxDEV("option",{value:"",children:"Semua Jenis"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:224,columnNumber:17},this),k.map(a=>i.jsxDEV("option",{value:a,children:a},a,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:226,columnNumber:19},this))]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:219,columnNumber:15},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:215,columnNumber:13},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:214,columnNumber:11},this),i.jsxDEV("div",{className:"flex items-end",children:i.jsxDEV("button",{onClick:()=>{x({search:"",jenisPembayaran:""}),d.get(m,{},{preserveState:!0})},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors duration-200",children:"Reset Filter"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:234,columnNumber:13},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:233,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:213,columnNumber:9},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:212,columnNumber:7},this),i.jsxDEV(A,{data:D,tabelName:"Siswa Belum Lunas",columns:[{header:"Nama Siswa",accessor:"siswa"},{header:"NISN",accessor:"nisn"},{header:"Jenis Pembayaran",accessor:"jenisPembayaran"},{header:"Nominal Penetapan",accessor:"nominalPenetapan"},{header:"Total Dibayar",accessor:"totalDibayar"},{header:"Sisa Pembayaran",accessor:"sisaPembayaran"},{header:"Status Partisipasi",accessor:"statusPartisipasi",action:a=>i.jsxDEV(v,{status:a.statusPartisipasi},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:260,columnNumber:35},this)},{header:"Aksi",accessor:"id",action:a=>i.jsxDEV(T,{row:a},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:265,columnNumber:35},this)}],pageSize:15,placeholder:"Cari siswa berdasarkan nama...",noDataText:"Tidak ada data siswa dengan pembayaran belum lunas",onRowClick:a=>p(a),serverPagination:{currentPage:h,lastPage:y,total:(r==null?void 0:r.total)||0,onPageChange:I},serverSearch:{value:u.search,onChange:S},viewModal:!0},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:247,columnNumber:7},this),i.jsxDEV(E,{data:B(P),open:!!P,onClose:()=>p(null),title:"Detail Pembayaran Siswa",exclude:[]},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:285,columnNumber:7},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:197,columnNumber:5},this)}V.layout=t=>{const s=t.props.activeRole??t.props.user.role;return s=="Guru"?i.jsxDEV(G,{children:t},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:299,columnNumber:12},void 0):s=="Staf"?i.jsxDEV(K,{children:t},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:303,columnNumber:12},void 0):i.jsxDEV(M,{children:t},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/PartisipasiUjian.tsx",lineNumber:306,columnNumber:10},void 0)};export{V as default};
