import{u as oe,a as ue,c as o,j as r,r as M}from"./app-Bzs2Gd0p.js";import{D as F}from"./TabelData-Cg-6qyrD.js";import{N as Ne}from"./Notification-BZaUPjAP.js";import{S as de}from"./SuperAdminLayouts-B2SIYU2P.js";import{M as ce}from"./ModalView-CgG3FUle.js";import{U as me}from"./UniversalInput-gcmVdzHR.js";import{S as xe}from"./StafLayouts-DaalXZaH.js";import{G as Ie}from"./GuruLayouts-Ci9JThou.js";import"./FormatWaktu-CaIpskCQ.js";import"./Breadcrump-CXoRlEgY.js";import"./index-BzCDgUCn.js";import"./TextEditor-CezWaANt.js";/* empty css                  */function pe({kehadirans:N,kehadiranPaginate:s,searchQuery:_="",namaUjianFilter:z="",listUjian:T}){var C;const{props:l}=oe(),g=(C=l==null?void 0:l.pattern)==null?void 0:C.split("/"),{notify:J}=ue();o.useEffect(()=>{var e,a,u;(e=l==null?void 0:l.session)!=null&&e.status&&J((a=l==null?void 0:l.session)==null?void 0:a.message,(u=l==null?void 0:l.session)==null?void 0:u.status)},[l.session]);const[S,W]=o.useState([]),[R,E]=o.useState(),[A,D]=o.useState((s==null?void 0:s.currentPage)||1),[K,je]=o.useState((s==null?void 0:s.lastPage)||1),[B,O]=o.useState(_),[v,q]=o.useState(z),[c,b]=o.useState("mapel"),[n,G]=o.useState(null),[t,k]=o.useState(null),[U,h]=o.useState([]),[Se,H]=o.useState(1),[f,V]=o.useState("");o.useEffect(()=>{if(!N)return;const e=[];N.map(a=>{var u,m,i,d,I,p,j,x,L,$;e.push({...a,id:a==null?void 0:a.id,namaSiswa:((u=a==null?void 0:a.user)==null?void 0:u.fullName)||"-",email:((m=a==null?void 0:a.user)==null?void 0:m.email)||"-",nisn:((d=(i=a==null?void 0:a.user)==null?void 0:i.dataSiswa)==null?void 0:d.nisn)||"-",namaUjian:((I=a==null?void 0:a.ujian)==null?void 0:I.namaUjian)||"-",jenisUjian:((p=a==null?void 0:a.ujian)==null?void 0:p.jenisUjian)||"-",mapel:((x=(j=a==null?void 0:a.ujian)==null?void 0:j.mapel)==null?void 0:x.namaMataPelajaran)||"-",mapelId:(($=(L=a==null?void 0:a.ujian)==null?void 0:L.mapel)==null?void 0:$.id)||"-"})}),W(e)},[N]);const Q=T.reduce((e,a)=>{var I,p,j;const u=((I=a.mapel)==null?void 0:I.namaMataPelajaran)||"Tidak ada mapel",m=((p=a.mapel)==null?void 0:p.jenjang)||"Tidak ada mapel",i=((j=a.mapel)==null?void 0:j.id)||"no-id";e[i]||(e[i]={id:i,namaMapel:u,jenjang:m,jumlahUjian:0,jumlahSiswa:0,ujianList:[]});const d=S.filter(x=>(x==null?void 0:x.ujianId)===a.id);return e[i].jumlahUjian+=1,e[i].jumlahSiswa+=d.length,e[i].ujianList.push({id:a.id,namaUjian:a.namaUjian,siswa:d}),e},{}),X=e=>{G(e),b("siswa"),H(1),V(""),h([{label:"Semua Mapel",action:()=>w()},{label:e.namaMapel,action:()=>{}}])},Y=e=>{k(e),b("detail"),h([{label:"Semua Mapel",action:()=>w()},{label:n.namaMapel,action:()=>Z()},{label:e.namaSiswa,action:()=>{}}])},w=()=>{G(null),k(null),b("mapel"),h([])},Z=()=>{k(null),b("siswa"),h([{label:"Semua Mapel",action:()=>w()},{label:n.namaMapel,action:()=>{}}])},P=n?Array.from(new Map(S.filter(e=>(e==null?void 0:e.mapelId)===n.id).map(e=>[e==null?void 0:e.userId,e])).values()):[],ee=t?S.filter(e=>(e==null?void 0:e.userId)===t.userId&&(e==null?void 0:e.mapelId)===n.id):[],ae=e=>{const a=S.filter(i=>(i==null?void 0:i.userId)===e.userId&&(i==null?void 0:i.mapelId)===n.id),u=a.length,m=u>0?(a.reduce((i,d)=>i+parseFloat((d==null?void 0:d.skor)||0),0)/u).toFixed(2):0;return{totalUjian:u,rataRataSkor:m}},re=T.map(e=>{var a;return{label:`${e==null?void 0:e.namaUjian}/${(a=e==null?void 0:e.mapel)==null?void 0:a.namaMataPelajaran}`,value:e==null?void 0:e.id}}),y=e=>{M.get(`/${g[1]}/laporan-nilai`,{page:e,search:B,nama_ujian:v},{preserveState:!0,replace:!0}),D(e)},ie=e=>{O(e),M.get(`/${g[1]}/laporan-nilai`,{page:1,search:e,nama_ujian:v},{preserveState:!0,replace:!0,preserveScroll:!0}),D(1)},ne=e=>{q(e),M.get(`/${g[1]}/laporan-nilai`,{page:1,search:B,nama_ujian:e},{preserveState:!0,replace:!0,preserveScroll:!0}),D(1)},se=e=>{V(e)},le=P.filter(e=>e.namaSiswa.toLowerCase().includes(f.toLowerCase())||e.nisn.toLowerCase().includes(f.toLowerCase())||e.email.toLowerCase().includes(f.toLowerCase())),te=()=>r.jsxDEV("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:r.jsxDEV("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:U.map((e,a)=>r.jsxDEV("li",{className:"inline-flex items-center",children:[a>0&&r.jsxDEV("svg",{className:"w-3 h-3 text-gray-400 mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:r.jsxDEV("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:259,columnNumber:17},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:252,columnNumber:15},this),r.jsxDEV("button",{onClick:e.action,className:`inline-flex items-center text-sm font-medium ${a===U.length-1?"text-gray-500 dark:text-gray-400 cursor-default":"text-gray-700 hover:text-purple-600 dark:text-gray-400 dark:hover:text-white cursor-pointer transition-colors duration-200"}`,children:e.label},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:268,columnNumber:13},this)]},a,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:250,columnNumber:11},this))},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:248,columnNumber:7},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:247,columnNumber:5},this);return r.jsxDEV("div",{className:"max-w-7xl mx-auto lg:p-6",children:[r.jsxDEV(Ne,{},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:286,columnNumber:7},this),r.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[r.jsxDEV("div",{children:[r.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[c==="mapel"&&"Data Mata Pelajaran",c==="siswa"&&`Siswa - ${n==null?void 0:n.namaMapel}`,c==="detail"&&`Detail Kehadiran - ${t==null?void 0:t.namaSiswa}`]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:291,columnNumber:11},this),U.length>0&&te()]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:290,columnNumber:9},this),n&&r.jsxDEV("a",{href:`${l.pattern}/cetak?mapel=${n==null?void 0:n.namaMapel}`,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors duration-200",children:[r.jsxDEV("i",{className:"fa-solid fa-file-excel"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:303,columnNumber:13},this)," Export Excell"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:299,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:289,columnNumber:7},this),c==="mapel"&&r.jsxDEV("div",{className:"mb-4",children:r.jsxDEV(me,{name:"ujian",type:"select",options:re,placeholder:"Filter berdasarkan nama ujian...",value:v,onChange:e=>ne(e)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:311,columnNumber:11},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:310,columnNumber:9},this),c==="mapel"&&r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(Q).map(e=>r.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-purple-200 dark:border-purple-800 hover:shadow-lg transition-shadow cursor-pointer hover:border-purple-300 dark:hover:border-purple-600",onClick:()=>X(e),children:[r.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[r.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[e.namaMapel," (",e.jenjang,")"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:332,columnNumber:17},this),r.jsxDEV("svg",{className:"w-5 h-5 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:341,columnNumber:19},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:335,columnNumber:17},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:331,columnNumber:15},this),r.jsxDEV("div",{className:"space-y-2",children:[r.jsxDEV("div",{className:"flex justify-between text-sm",children:[r.jsxDEV("span",{className:"text-gray-600 dark:text-gray-400",children:"Jumlah Ujian:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:352,columnNumber:19},this),r.jsxDEV("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:e.jumlahUjian},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:353,columnNumber:19},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:351,columnNumber:17},this),r.jsxDEV("div",{className:"flex justify-between text-sm",children:[r.jsxDEV("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Siswa:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:358,columnNumber:19},this),r.jsxDEV("span",{className:"font-medium text-pink-600 dark:text-pink-400",children:e.jumlahSiswa},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:359,columnNumber:19},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:357,columnNumber:17},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:350,columnNumber:15},this),r.jsxDEV("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxDEV("p",{className:"text-xs text-purple-500 dark:text-purple-400",children:"Klik untuk melihat daftar siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:366,columnNumber:17},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:365,columnNumber:15},this)]},e.id,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:326,columnNumber:13},this))},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:324,columnNumber:9},this),c==="siswa"&&r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"mb-4 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-purple-200 dark:border-purple-800",children:[r.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["Daftar Siswa - ",n==null?void 0:n.namaMapel]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:379,columnNumber:13},this),r.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Total ",P.length," siswa"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:382,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:378,columnNumber:11},this),r.jsxDEV(F,{data:le.map(e=>({...e,...ae(e)})),tabelName:"Siswa",columns:[{header:"NISN",accessor:"nisn"},{header:"Nama Siswa",accessor:"namaSiswa"},{header:"Total Ujian",accessor:"totalUjian"},{header:"Rata-rata Skor",accessor:"rataRataSkor"}],pageSize:15,placeholder:"Cari NISN, nama, atau email...",noDataText:"Tidak ada data siswa",onRowClick:e=>Y(e),viewModal:!0,serverSearch:{value:f,onChange:se},serverPagination:{currentPage:A,lastPage:K,total:(s==null?void 0:s.total)||0,onPageChange:y}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:387,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:377,columnNumber:9},this),c==="detail"&&r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"mb-4 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-purple-200 dark:border-purple-800",children:[r.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["Detail Kehadiran - ",t==null?void 0:t.namaSiswa]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:428,columnNumber:13},this),r.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["NISN: ",t==null?void 0:t.nisn," â€¢ Email: ",t==null?void 0:t.email]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:431,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:427,columnNumber:11},this),r.jsxDEV(F,{data:ee,tabelName:"Kehadiran",columns:[{header:"Nama Ujian",accessor:"namaUjian"},{header:"Jenis Ujian",accessor:"jenisUjian"},{header:"Skor",accessor:"skor"},{header:"Benar",accessor:"benar"},{header:"Salah",accessor:"salah"},{header:"Tanggal Ujian",isTime:{mode:"date",withDay:!0},accessor:"createdAt"}],pageSize:15,placeholder:"Cari nama ujian...",noDataText:"Tidak ada data kehadiran",onRowClick:e=>E(e),viewModal:!0,serverPagination:{currentPage:A,lastPage:K,total:(s==null?void 0:s.total)||0,onPageChange:y},serverSearch:{value:B,onChange:ie}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:436,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:426,columnNumber:9},this),r.jsxDEV(ce,{data:R,exclude:["*id","userId","ujianId","jawabanFile","ujian.jurusan","ujian.penulis","ujian.mapel.guruAmpu","*mapelId","user"],open:!!R,onClose:()=>E(null)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:470,columnNumber:7},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:285,columnNumber:5},this)}pe.layout=N=>{const s=N.props.activeRole??N.props.user.role;return s=="Staf"?r.jsxDEV(xe,{children:N},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:493,columnNumber:12},void 0):s=="Guru"?r.jsxDEV(Ie,{children:N},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:496,columnNumber:12},void 0):r.jsxDEV(de,{children:N},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:499,columnNumber:10},void 0)};export{pe as default};
