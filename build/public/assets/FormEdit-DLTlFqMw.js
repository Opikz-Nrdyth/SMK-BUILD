import{b as A,u as G,c as j,j as e,L as K,r as B}from"./app-iNLJP6JY.js";import{U as l}from"./UniversalInput-DM4_R_Pm.js";import{S as w}from"./SuperAdminLayouts-Dq5rzPmY.js";import{S as $}from"./StafLayouts-Z-vGqz7f.js";import"./index-BzCDgUCn.js";import"./TextEditor-DzcaE8um.js";/* empty css                  */import"./Breadcrump-U7TSQYvC.js";function V({initialValues:a,onSubmit:h,submitLabel:E,dark:i=!1,userOptions:v,jenisPembayaranOptions:d}){const{data:N,setData:b,processing:g,errors:c}=A(a||{userId:"",jenisPembayaran:"",nominalPenetapan:"",nominalBayar:"[]"}),{props:u}=G(),p=u==null?void 0:u.pattern.split("/").filter(r=>r!=""),y=`/${p[0]}/${p[1]}`,[m,I]=j.useState({nominal:"",tanggal:new Date().toISOString().split("T")[0]}),[f,x]=j.useState(!1),k=r=>{r.preventDefault(),h(N)},T=r=>{if(r.preventDefault(),!m.nominal||!m.tanggal){alert("Harap isi nominal dan tanggal pembayaran");return}const n=parseFloat(m.nominal);if(isNaN(n)||n<=0){alert("Nominal harus berupa angka yang valid dan lebih dari 0");return}const o=(a==null?void 0:a.sisaPembayaran)||0;if(n>o){alert(`Nominal pembayaran (${t(n)}) melebihi sisa pembayaran (${t(o)}).

Maksimal yang bisa dibayar: ${t(o)}`);return}const S=(a==null?void 0:a.totalDibayar)||0,D=parseFloat((a==null?void 0:a.nominalPenetapan)||"0");if(S+n>D){alert(`Total pembayaran akan melebihi nominal penetapan.

Sudah dibayar: ${t(S)}
Penetapan: ${t(D)}
Maksimal bisa bayar: ${t(o)}`);return}confirm(`Tambahkan pembayaran sebesar ${t(n)}?

Sisa setelah bayar: ${t(o-n)}`)&&B.post(`${y}/${a==null?void 0:a.id}/tambah-pembayaran`,m,{onSuccess:()=>{I({nominal:"",tanggal:new Date().toISOString().split("T")[0]}),x(!1),B.reload()},onError:U=>{console.error("Error menambah pembayaran:",U),alert("Gagal menambah pembayaran. Silakan coba lagi.")}})},t=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),F=(a==null?void 0:a.totalDibayar)||0,P=(a==null?void 0:a.sisaPembayaran)||0,R=parseFloat((a==null?void 0:a.nominalPenetapan)||"0"),s=P<=0,M=(d==null?void 0:d.map(r=>({label:r,value:r})))||[];return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-blue-50 dark:bg-gray-700 p-4 rounded-lg border border-blue-200",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-blue-800 dark:text-blue-400 mb-4",children:"Informasi Pembayaran Saat Ini"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:139,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm dark:text-white",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Siswa:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:144,columnNumber:13},this)," ",a==null?void 0:a.userName]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:143,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Jenis Pembayaran:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:147,columnNumber:13},this)," ",a==null?void 0:a.jenisPembayaran]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:146,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Nominal Penetapan:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:150,columnNumber:13},this)," ",t(R)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:149,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Total Dibayar:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:153,columnNumber:13},this)," ",t(F)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:152,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Sisa Pembayaran:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:156,columnNumber:13},this),e.jsxDEV("span",{className:`ml-2 font-bold ${s?"text-green-600":"text-red-600"}`,children:t(P)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:157,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:155,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Status:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:162,columnNumber:13},this),e.jsxDEV("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${s?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s?"LUNAS":"BELUM LUNAS"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:163,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:161,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:142,columnNumber:9},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:138,columnNumber:7},this),e.jsxDEV("form",{onSubmit:k,className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Edit Data Pembayaran"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:177,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV(l,{type:"select",name:"userId",label:"Siswa",value:N.userId,onChange:r=>b("userId",r),options:v||[],required:!0,dark:i},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:181,columnNumber:13},this),e.jsxDEV(l,{type:"select",name:"jenisPembayaran",label:"Jenis Pembayaran",value:N.jenisPembayaran,onChange:r=>b("jenisPembayaran",r),options:M,required:!0,dark:i},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:192,columnNumber:13},this),e.jsxDEV("div",{className:"md:col-span-2",children:e.jsxDEV(l,{type:"currency",name:"nominalPenetapan",label:"Nominal Penetapan",value:N.nominalPenetapan,onChange:r=>b("nominalPenetapan",r),required:!0,dark:i},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:204,columnNumber:15},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:203,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:180,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:176,columnNumber:9},this),e.jsxDEV("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsxDEV(K,{href:y,className:"px-6 py-3 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors",children:"Kembali"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:219,columnNumber:11},this),e.jsxDEV("button",{type:"submit",disabled:g,className:"px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2 transition-colors",children:g?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:232,columnNumber:17},this),e.jsxDEV("span",{children:"Menyimpan..."},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:233,columnNumber:17},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:231,columnNumber:15},this):e.jsxDEV("span",{children:E},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:236,columnNumber:15},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:225,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:218,columnNumber:9},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:175,columnNumber:7},this),e.jsxDEV("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Riwayat Pembayaran"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:245,columnNumber:11},this),!s&&e.jsxDEV("button",{onClick:()=>x(!f),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"+ Tambah Pembayaran"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:247,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:244,columnNumber:9},this),f&&!s&&e.jsxDEV("form",{onSubmit:T,className:"bg-yellow-50 dark:bg-gray-700 p-4 rounded-lg border border-yellow-200 mb-4",children:[e.jsxDEV("h4",{className:"font-medium text-yellow-800 dark:text-white mb-3",children:"Tambah Pembayaran Baru"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:262,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV(l,{type:"currency",name:"nominal",label:"Nominal Bayar",value:m.nominal,onChange:r=>I(n=>({...n,nominal:r})),required:!0,dark:i},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:266,columnNumber:15},this),e.jsxDEV(l,{type:"date",name:"tanggal",label:"Tanggal Bayar",value:m.tanggal,onChange:r=>I(n=>({...n,tanggal:r})),required:!0,dark:i},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:276,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-end space-x-2",children:[e.jsxDEV("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Simpan"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:287,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors",children:"Batal"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:293,columnNumber:17},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:286,columnNumber:15},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:265,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:258,columnNumber:11},this),a!=null&&a.riwayatPembayaran&&a.riwayatPembayaran.length>0?e.jsxDEV("div",{className:"space-y-3",children:a.riwayatPembayaran.map((r,n)=>e.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg border",children:[e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxDEV("span",{className:"text-blue-600 font-medium text-sm",children:n+1},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:315,columnNumber:21},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:314,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium text-gray-900",children:t(parseFloat(r.nominal))},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:318,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm text-gray-500",children:new Date(r.tanggal).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:321,columnNumber:21},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:317,columnNumber:19},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:313,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm text-gray-500",children:new Date(r.tanggal).toLocaleDateString("id-ID")},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:331,columnNumber:17},this)]},n,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:309,columnNumber:15},this))},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:307,columnNumber:11},this):e.jsxDEV("div",{className:"text-center py-8 text-gray-500",children:[e.jsxDEV("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:345,columnNumber:15},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:339,columnNumber:13},this),e.jsxDEV("p",{className:"mt-2",children:"Belum ada riwayat pembayaran"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:352,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:338,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:243,columnNumber:7},this),c&&Object.keys(c).length>0&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[e.jsxDEV("h4",{className:"text-red-800 font-medium mb-2",children:"Terjadi kesalahan:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:359,columnNumber:11},this),e.jsxDEV("ul",{className:"list-disc list-inside text-red-700 text-sm",children:Object.entries(c).map(([r,n])=>e.jsxDEV("li",{children:n},r,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:362,columnNumber:15},this))},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:360,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:358,columnNumber:9},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:136,columnNumber:5},this)}V.layout=a=>(a.props.activeRole??a.props.user.role)=="Staf"?e.jsxDEV($,{children:a},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:374,columnNumber:12},void 0):e.jsxDEV(w,{children:a},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Pembayaran/FormEdit.tsx",lineNumber:377,columnNumber:10},void 0);export{V as default};
