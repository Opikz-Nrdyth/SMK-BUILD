import{u as be,a as Se,c as t,j as a,r as H}from"./app-CzSEP_ni.js";import{D as B}from"./TabelData-DM5Qq9wK.js";import{N as pe}from"./Notification-DwndurhI.js";import{S as ge}from"./SuperAdminLayouts-pXnwNkxQ.js";import{M as fe}from"./ModalView-UBVBqd_2.js";import{G as De}from"./GuruLayouts-CRRkik1q.js";import{getSocket as Be}from"./socket-BHGOFHVg.js";import"./FormatWaktu-CaIpskCQ.js";import"./Breadcrump-CRhcX-X5.js";import"./index-CA1CrNgP.js";function Ue({kehadirans:u,kehadiranPaginate:m,searchQuery:Q="",listUjian:U}){const{props:X}=be();X.pattern;const{notify:Y}=Se(),w=Be();t.useEffect(()=>(w.on("user_joined",e=>{console.log("ðŸŸ¢",e.message)}),w.on("new_message",e=>{Y(`${e.message}`,"info")}),()=>{w.off("user_joined")}),[]);const[K,Z]=t.useState([]),[c,R]=t.useState(),[ee,E]=t.useState((m==null?void 0:m.currentPage)||1),[ae,we]=t.useState((m==null?void 0:m.lastPage)||1),[A,ne]=t.useState(Q),[d,N]=t.useState("jenisUjian"),[i,G]=t.useState(null),[r,k]=t.useState(null),[s,f]=t.useState(null),[x,b]=t.useState(null),[v,h]=t.useState([]),[V,y]=t.useState(""),[P,C]=t.useState(""),[M,J]=t.useState("");t.useEffect(()=>{if(!u)return;const e=[];u.map(n=>{var l,o,I,p,g,D,O,W,_,F,q;e.push({...n,id:n.id,namaSiswa:((l=n==null?void 0:n.user)==null?void 0:l.fullName)||"-",email:((o=n==null?void 0:n.user)==null?void 0:o.email)||"-",nisn:((p=(I=n==null?void 0:n.user)==null?void 0:I.dataSiswa)==null?void 0:p.nisn)||"-",namaUjian:((g=n==null?void 0:n.ujian)==null?void 0:g.namaUjian)||"-",jenisUjian:((D=n==null?void 0:n.ujian)==null?void 0:D.jenisUjian)||"-",mapel:((W=(O=n==null?void 0:n.ujian)==null?void 0:O.mapel)==null?void 0:W.namaMataPelajaran)||"-",mapelId:((F=(_=n==null?void 0:n.ujian)==null?void 0:_.mapel)==null?void 0:F.id)||"-",ujianId:((q=n==null?void 0:n.ujian)==null?void 0:q.id)||"-"})}),Z(e)},[u]);const ie=U.reduce((e,n)=>{const l=n.jenisUjian||"Tidak ada jenis";e[l]||(e[l]={id:l,namaJenisUjian:l,jumlahMapel:0,jumlahUjian:0,jumlahSiswa:0}),e[l].jumlahUjian+=1;const o=K.filter(I=>I.ujianId===n.id);return e[l].jumlahSiswa+=o.length,e},{}),L=i?U.filter(e=>e.jenisUjian===i.namaJenisUjian).reduce((e,n)=>{var p,g;const l=((p=n.mapel)==null?void 0:p.namaMataPelajaran)||"Tidak ada mapel",o=((g=n.mapel)==null?void 0:g.id)||"no-id";e[o]||(e[o]={id:o,namaMapel:l,jumlahUjian:0,jumlahSiswa:0,ujianList:[]});const I=K.filter(D=>D.ujianId===n.id);return e[o].jumlahUjian+=1,e[o].jumlahSiswa+=I.length,e[o].ujianList.push({id:n.id,namaUjian:n.namaUjian,siswa:I}),e},{}):{},$=r?U.filter(e=>{var n;return((n=e.mapel)==null?void 0:n.id)===r.id&&e.jenisUjian===i.namaJenisUjian}).map(e=>({...e,kode:e.kode??"-"})):[],z=s?K.filter(e=>e.ujianId===s.id):[],re=e=>{G(e),N("mapel"),y(""),h([{label:"Jenis Ujian",action:()=>j()},{label:e.namaJenisUjian,action:()=>{}}])},te=e=>{k(e),N("ujian"),C(""),h([{label:"Jenis Ujian",action:()=>j()},{label:i.namaJenisUjian,action:()=>S()},{label:e.namaMapel,action:()=>{}}])},se=e=>{f(e),N("siswa"),J(""),h([{label:"Jenis Ujian",action:()=>j()},{label:i.namaJenisUjian,action:()=>S()},{label:r.namaMapel,action:()=>T()},{label:e.namaUjian,action:()=>{}}])},le=e=>{b(e),N("detail"),h([{label:"Jenis Ujian",action:()=>j()},{label:i.namaJenisUjian,action:()=>S()},{label:r.namaMapel,action:()=>T()},{label:s.namaUjian,action:()=>oe()},{label:e.namaSiswa,action:()=>{}}])},j=()=>{G(null),k(null),f(null),b(null),N("jenisUjian"),h([])},S=()=>{k(null),f(null),b(null),N("mapel"),h([{label:"Jenis Ujian",action:()=>j()},{label:i.namaJenisUjian,action:()=>{}}])},T=()=>{f(null),b(null),N("ujian"),h([{label:"Jenis Ujian",action:()=>j()},{label:i.namaJenisUjian,action:()=>S()},{label:r.namaMapel,action:()=>{}}])},oe=()=>{b(null),N("siswa"),h([{label:"Jenis Ujian",action:()=>j()},{label:i.namaJenisUjian,action:()=>S()},{label:r.namaMapel,action:()=>T()},{label:s.namaUjian,action:()=>{}}])},me=Object.values(L).filter(e=>e.namaMapel.toLowerCase().includes(V.toLowerCase())),de=$.filter(e=>e.namaUjian.toLowerCase().includes(P.toLowerCase())),ue=z.filter(e=>e.namaSiswa.toLowerCase().includes(M.toLowerCase())||e.nisn.toLowerCase().includes(M.toLowerCase())),ce=e=>{y(e)},Ne=e=>{C(e)},he=e=>{J(e)},xe=e=>{H.get("/SuperAdmin/manajemen-jawaban",{page:e,search:A},{preserveState:!0,replace:!0}),E(e)},je=e=>{ne(e),H.get("/SuperAdmin/manajemen-jawaban",{page:1,search:e},{preserveState:!0,replace:!0,preserveScroll:!0}),E(1)},Ie=()=>a.jsxDEV("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:a.jsxDEV("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:v.map((e,n)=>a.jsxDEV("li",{className:"inline-flex items-center",children:[n>0&&a.jsxDEV("svg",{className:"w-3 h-3 text-gray-400 mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:a.jsxDEV("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:325,columnNumber:17},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:318,columnNumber:15},this),a.jsxDEV("button",{onClick:e.action,className:`inline-flex items-center text-sm font-medium ${n===v.length-1?"text-gray-500 dark:text-gray-400 cursor-default":"text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white cursor-pointer"}`,children:e.label},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:334,columnNumber:13},this)]},n,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:316,columnNumber:11},this))},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:314,columnNumber:7},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:313,columnNumber:5},this);return a.jsxDEV("div",{className:"max-w-6xl mx-auto lg:p-6",children:[a.jsxDEV(pe,{},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:352,columnNumber:7},this),a.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:a.jsxDEV("div",{children:[a.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[d==="jenisUjian"&&"Manajemen Jawaban - Jenis Ujian",d==="mapel"&&`Mapel - ${i==null?void 0:i.namaJenisUjian}`,d==="ujian"&&`Ujian - ${r==null?void 0:r.namaMapel}`,d==="siswa"&&`Siswa - ${s==null?void 0:s.namaUjian}`,d==="detail"&&`Detail Jawaban - ${x==null?void 0:x.namaSiswa}`]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:357,columnNumber:11},this),v.length>0&&Ie()]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:356,columnNumber:9},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:355,columnNumber:7},this),d==="jenisUjian"&&a.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(ie).map(e=>a.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>re(e),children:[a.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[a.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.namaJenisUjian},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:378,columnNumber:17},this),a.jsxDEV("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:387,columnNumber:19},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:381,columnNumber:17},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:377,columnNumber:15},this),a.jsxDEV("div",{className:"space-y-2",children:[a.jsxDEV("div",{className:"flex justify-between text-sm",children:[a.jsxDEV("span",{className:"text-gray-600 dark:text-gray-400",children:"Jumlah Ujian:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:398,columnNumber:19},this),a.jsxDEV("span",{className:"font-medium text-gray-900 dark:text-white",children:e.jumlahUjian},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:399,columnNumber:19},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:397,columnNumber:17},this),a.jsxDEV("div",{className:"flex justify-between text-sm",children:[a.jsxDEV("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Siswa:"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:404,columnNumber:19},this),a.jsxDEV("span",{className:"font-medium text-gray-900 dark:text-white",children:e.jumlahSiswa},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:405,columnNumber:19},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:403,columnNumber:17},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:396,columnNumber:15},this),a.jsxDEV("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxDEV("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Klik untuk melihat mata pelajaran"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:412,columnNumber:17},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:411,columnNumber:15},this)]},e.id,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:372,columnNumber:13},this))},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:370,columnNumber:9},this),d==="mapel"&&a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"mb-4 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[a.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["Mata Pelajaran - ",i==null?void 0:i.namaJenisUjian]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:425,columnNumber:13},this),a.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Total ",Object.keys(L).length," mata pelajaran"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:428,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:424,columnNumber:11},this),a.jsxDEV(B,{data:me,tabelName:"Mapel",columns:[{header:"Nama Mapel",accessor:"namaMapel"},{header:"Jumlah Ujian",accessor:"jumlahUjian"},{header:"Jumlah Siswa",accessor:"jumlahSiswa"}],pageSize:15,placeholder:"Cari mata pelajaran...",noDataText:"Tidak ada data mata pelajaran",onRowClick:e=>te(e),viewModal:!0,serverSearch:{value:V,onChange:ce}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:433,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:423,columnNumber:9},this),d==="ujian"&&a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"mb-4 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[a.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["Daftar Ujian - ",r==null?void 0:r.namaMapel]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:458,columnNumber:13},this),a.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i==null?void 0:i.namaJenisUjian," â€¢ Total ",$.length," ujian"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:461,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:457,columnNumber:11},this),a.jsxDEV(B,{data:de,tabelName:"Ujian",columns:[{header:"Nama Ujian",accessor:"namaUjian"},{header:"Kode",accessor:"kode"},{header:"Waktu",accessor:"waktu"},{header:"Tanggal Ujian",accessor:"tanggalUjian",isTime:{mode:"date",withDay:!0}}],pageSize:15,placeholder:"Cari nama ujian...",noDataText:"Tidak ada data ujian",onRowClick:e=>se(e),viewModal:!0,serverSearch:{value:P,onChange:Ne}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:466,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:456,columnNumber:9},this),d==="siswa"&&a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"mb-4 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[a.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["Daftar Siswa - ",s==null?void 0:s.namaUjian]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:496,columnNumber:13},this),a.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r==null?void 0:r.namaMapel," â€¢ Total ",z.length," siswa"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:499,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:495,columnNumber:11},this),a.jsxDEV(B,{data:ue,tabelName:"Siswa",columns:[{header:"NISN",accessor:"nisn"},{header:"Nama Siswa",accessor:"namaSiswa"},{header:"Email",accessor:"email"},{header:"Skor",accessor:"skor"},{header:"Benar",accessor:"benar"},{header:"Salah",accessor:"salah"},{header:"Status",accessor:"status"}],pageSize:15,placeholder:"Cari NISN atau nama siswa...",noDataText:"Tidak ada data siswa",onRowClick:e=>le(e),viewModal:!0,serverSearch:{value:M,onChange:he}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:504,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:494,columnNumber:9},this),d==="detail"&&a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"mb-4 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[a.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["Detail Jawaban - ",x==null?void 0:x.namaSiswa]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:536,columnNumber:13},this),a.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Ujian: ",s==null?void 0:s.namaUjian," â€¢ Mapel: ",r==null?void 0:r.namaMapel]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:539,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:535,columnNumber:11},this),a.jsxDEV(B,{data:[x],tabelName:"Jawaban",columns:[{header:"Nama Siswa",accessor:"namaSiswa"},{header:"NISN",accessor:"nisn"},{header:"Email",accessor:"email"},{header:"Skor",accessor:"skor"},{header:"Benar",accessor:"benar"},{header:"Salah",accessor:"salah"},{header:"Status",accessor:"status"},{header:"Tanggal Ujian",isTime:{mode:"date",withDay:!0},accessor:"createdAt"}],pageSize:15,placeholder:"Cari data...",noDataText:"Tidak ada data jawaban",onRowClick:e=>R(e),viewModal:!0,serverPagination:{currentPage:ee,lastPage:ae,total:(m==null?void 0:m.total)||0,onPageChange:xe},serverSearch:{value:A,onChange:je}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:544,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:534,columnNumber:9},this),a.jsxDEV(fe,{data:{...c,skor:parseInt(c==null?void 0:c.skor).toFixed(1),progress:`${c==null?void 0:c.progress}%`},exclude:["*id","userId","ujianId","user","ujian","mapelId","jawabanFile","Perbandingan"],open:!!c,onClose:()=>R(null)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:580,columnNumber:7},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:351,columnNumber:5},this)}Ue.layout=u=>(u.props.activeRole??u.props.user.role)=="Guru"?a.jsxDEV(De,{children:u},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:606,columnNumber:12},void 0):a.jsxDEV(ge,{children:u},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Kehadiran/Index.tsx",lineNumber:609,columnNumber:10},void 0);export{Ue as default};
