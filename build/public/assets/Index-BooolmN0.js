import{u as w,c as n,j as e,r as c}from"./app-CzSEP_ni.js";import{D as A}from"./TabelData-DM5Qq9wK.js";import{N as M}from"./Notification-DwndurhI.js";import{S as E}from"./SuperAdminLayouts-pXnwNkxQ.js";import{M as S}from"./ModalView-UBVBqd_2.js";import{S as R}from"./StafLayouts-D2tLjYNY.js";import{M as T}from"./modalImportExcel-CPo6iuaH.js";import"./FormatWaktu-CaIpskCQ.js";import"./Breadcrump-CRhcX-X5.js";function K({auth:l,siswas:i,siswaPaginate:s,searchQuery:x=""}){const{props:t}=w(),[I,m]=n.useState(!1),[f,h]=n.useState([]),[o,u]=n.useState(),[b,d]=n.useState((s==null?void 0:s.currentPage)||1),[g,V]=n.useState((s==null?void 0:s.lastPage)||1),[D,j]=n.useState(x);n.useEffect(()=>{if(!i)return;const a=[];i.map(r=>{var p,N;a.push({...r,id:r.nisn,fullName:((p=r==null?void 0:r.user)==null?void 0:p.fullName)||"-",email:((N=r==null?void 0:r.user)==null?void 0:N.email)||"-"})}),h(a)},[i]);const v=a=>{c.get(t.pattern?String(t.pattern):"/SuperAdmin/manajemen-siswa",{page:a},{preserveState:!0,replace:!0}),d(a)},B=a=>{j(a),c.get(t.pattern?String(t.pattern):"/SuperAdmin/manajemen-siswa",{page:1,search:a},{preserveState:!0,replace:!0,preserveScroll:!0}),d(1)},k=async a=>{const r=new FormData;r.append("excel_file",a),c.post(`${String(t.pattern)}/import`,r,{onSuccess:()=>{m(!1)}})};return e.jsxDEV("div",{className:"max-w-7xl mx-auto lg:p-6",children:[e.jsxDEV(M,{},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:85,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Data Siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:87,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-wrap items-center lg:gap-3 gap-1",children:[e.jsxDEV("a",{href:`${String(t.pattern)}/kelas`,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Lihat per kelas"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:89,columnNumber:11},this),e.jsxDEV("a",{href:`${String(t.pattern)}/create`,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Tambah Siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:95,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>{m(!0)},className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Import Siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:101,columnNumber:11},this),e.jsxDEV("a",{href:`${String(t.pattern)}/export`,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Export Siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:109,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:88,columnNumber:9},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:86,columnNumber:7},this),e.jsxDEV(A,{data:f,tabelName:"Siswa",columns:[{header:"No",accessor:"nomor"},{header:"NISN",accessor:"nisn"},{header:"Nama",accessor:"fullName",sort:"fullName"},{header:"Email",accessor:"email"},{header:"Jenis Kelamin",accessor:"jenisKelamin"},{header:"Tanggal Lahir",isTime:{mode:"date",withDay:!0},accessor:"tanggalLahir"},{header:"Sekolah Asal",accessor:"sekolahAsal"}],editable:String(t.pattern),pageSize:15,placeholder:"Cari siswa...",noDataText:"Tidak ada data siswa",onRowClick:a=>u(a),serverPagination:{currentPage:b,lastPage:g,total:(s==null?void 0:s.total)||0,onPageChange:v},viewModal:!0,serverSearch:{value:D,onChange:B}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:118,columnNumber:7},this),t.route=="guru_siswa.index"?e.jsxDEV(S,{data:o,include:["fullName","nisn","jenisKelamin","tempatLahir","tanggalLahir","agama","nama_kelas"],open:!!o,onClose:()=>u(null)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:153,columnNumber:9},this):e.jsxDEV(S,{data:o,exclude:["fullName","*id","email","userId","*id","*updatedAt","*createdAt","nomor"],open:!!o,onClose:()=>u(null)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:168,columnNumber:9},this),e.jsxDEV(T,{onClose:()=>{m(!1)},open:I,onSubmit:k},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:185,columnNumber:7},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:84,columnNumber:5},this)}K.layout=l=>(l.props.activeRole??l.props.user.role)=="Staf"?e.jsxDEV(R,{children:l},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:199,columnNumber:12},void 0):e.jsxDEV(E,{children:l},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Siswa/Index.tsx",lineNumber:202,columnNumber:10},void 0);export{K as default};
