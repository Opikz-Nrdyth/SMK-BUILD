import{u as W,a as Y,c as o,j as i,r as Z}from"./app-nMpo0nzv.js";import{D as ee}from"./TabelData-Bq0KbQ7x.js";import{N as ae}from"./Notification-4m9luinP.js";import{S as ie}from"./SuperAdminLayouts--tQhjaE8.js";import{M as re}from"./ModalView-shfRxHOx.js";import{S as te}from"./StafLayouts-D4HfDRrx.js";import{G as ne}from"./GuruLayouts-CU16o3kR.js";import"./FormatWaktu-CaIpskCQ.js";import"./Breadcrump-BN6wmIl1.js";function se({kehadirans:N,kehadiranPaginate:t,searchQuery:R="",kelasFilter:A="",ujianFilter:G="",namaUjianFilter:V="",semuaKelas:f=[],listUjian:h=[],selectedUjian:c=null}){var v;const{props:r}=W(),w=(v=r==null?void 0:r.pattern)==null?void 0:v.split("/"),{notify:C}=Y();o.useEffect(()=>{var e,a,s;(e=r==null?void 0:r.session)!=null&&e.status&&C((a=r==null?void 0:r.session)==null?void 0:a.message,(s=r==null?void 0:r.session)==null?void 0:s.status)},[r.session]);const[m,L]=o.useState([]),[S,D]=o.useState(),[F,$]=o.useState((t==null?void 0:t.currentPage)||1),[X,le]=o.useState((t==null?void 0:t.lastPage)||1),[u,g]=o.useState(R),[n,B]=o.useState(A),[d,p]=o.useState(G),[oe,Ne]=o.useState(V),k=e=>({X:10,XI:11,XII:12})[e]||0,z=f.sort((e,a)=>{const s=e.namaKelas.split("-")[0],l=a.namaKelas.split("-")[0],I=k(s),b=k(l);return I!==b?I-b:e.namaKelas.localeCompare(a.namaKelas)});o.useEffect(()=>{if(!N)return;const e=[];N.map(a=>{var s,l,I,b,y,U,K,M,T,E,P;e.push({...a,id:a==null?void 0:a.id,namaSiswa:((s=a==null?void 0:a.user)==null?void 0:s.fullName)||"-",email:((l=a==null?void 0:a.user)==null?void 0:l.email)||"-",nisn:((b=(I=a==null?void 0:a.user)==null?void 0:I.dataSiswa)==null?void 0:b.nisn)||"-",namaUjian:((y=a==null?void 0:a.ujian)==null?void 0:y.namaUjian)||"-",jenisUjian:((U=a==null?void 0:a.ujian)==null?void 0:U.jenisUjian)||"-",mapel:((M=(K=a==null?void 0:a.ujian)==null?void 0:K.mapel)==null?void 0:M.namaMataPelajaran)||"-",mapelId:((E=(T=a==null?void 0:a.ujian)==null?void 0:T.mapel)==null?void 0:E.id)||"-",jenjang:((P=a==null?void 0:a.ujian)==null?void 0:P.jenjang)||"-"})}),L(e)},[N]);const _=e=>{B(e),p(""),x(e,"",u,1)},H=e=>{p(e),x(n,e,u,1)},j=e=>{g(e),x(n,d,e,1)},x=(e,a,s,l)=>{Z.get(`/${w[1]}/laporan-nilai`,{page:l,search:s,kelas_id:e,ujian_id:a},{preserveState:!0,replace:!0,preserveScroll:!0}),$(l)},q=e=>{x(n,d,u,e)},J=()=>{B(""),p(""),g(""),x("","","",1)},O=()=>{var a;const e=new URLSearchParams;return n&&e.append("kelas",n),d&&e.append("ujian",d),(a=c==null?void 0:c.mapel)!=null&&a.namaMataPelajaran&&e.append("mapel",c.mapel.namaMataPelajaran),`${r.pattern}/cetak?${e.toString()}`},Q=()=>{var s;const e=f.find(l=>l.id===n),a=h.find(l=>l.id===d)||c;return i.jsxDEV("div",{className:"mb-6",children:[i.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e?`Laporan Nilai - ${e.namaKelas}`:"Laporan Nilai"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:167,columnNumber:9},this),a&&i.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400",children:["Ujian: ",a.namaUjian," (",(s=a.mapel)==null?void 0:s.namaMataPelajaran,")"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:171,columnNumber:11},this),e&&!a&&i.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400",children:[e.jenjang," - ",e.namaKelas]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:176,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:166,columnNumber:7},this)};return i.jsxDEV("div",{className:"max-w-7xl mx-auto lg:p-6",children:[i.jsxDEV(ae,{},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:186,columnNumber:7},this),i.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[Q(),(n||d)&&i.jsxDEV("a",{href:O(),className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors duration-200",children:[i.jsxDEV("i",{className:"fa-solid fa-file-excel mr-2"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:196,columnNumber:13},this)," Export Excel"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:192,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:189,columnNumber:7},this),i.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6 border border-purple-200 dark:border-purple-800",children:[i.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Filter Laporan"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:203,columnNumber:9},this),i.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxDEV("div",{children:[i.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pilih Kelas"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:208,columnNumber:13},this),i.jsxDEV("select",{value:n,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 rounded-md border bg-white border-gray-300 text-gray-900 dark:bg-gray-800 dark:border-gray-600 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50",children:[i.jsxDEV("option",{value:"",children:"Semua Kelas"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:216,columnNumber:15},this),z.map(e=>i.jsxDEV("option",{value:e.id,children:e.namaKelas},e.id,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:218,columnNumber:17},this))]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:211,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:207,columnNumber:11},this),i.jsxDEV("div",{children:[i.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pilih Ujian"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:227,columnNumber:13},this),i.jsxDEV("select",{value:d,onChange:e=>H(e.target.value),disabled:!n,className:"w-full px-3 py-2 rounded-md border bg-white border-gray-300 text-gray-900 dark:bg-gray-800 dark:border-gray-600 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50",children:[i.jsxDEV("option",{value:"",children:"Semua Ujian"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:236,columnNumber:15},this),h.map(e=>{var a;return i.jsxDEV("option",{value:e.id,children:[e.namaUjian," - ",(a=e.mapel)==null?void 0:a.namaMataPelajaran]},e.id,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:238,columnNumber:17},this)})]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:230,columnNumber:13},this),!n&&i.jsxDEV("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Pilih kelas terlebih dahulu"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:244,columnNumber:15},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:226,columnNumber:11},this),i.jsxDEV("div",{children:[i.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cari Siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:252,columnNumber:13},this),i.jsxDEV("div",{className:"flex",children:[i.jsxDEV("input",{type:"text",value:u,onChange:e=>g(e.target.value),onKeyPress:e=>e.key==="Enter"&&j(u),placeholder:"Cari nama siswa atau NISN...",className:"w-full px-3 py-2 rounded-l-md border bg-white border-gray-300 text-gray-900 dark:bg-gray-800 dark:border-gray-600 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:256,columnNumber:15},this),i.jsxDEV("button",{onClick:()=>j(u),className:"px-4 py-2 bg-purple-600 text-white rounded-r-md hover:bg-purple-700",children:i.jsxDEV("i",{className:"fa-solid fa-search"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:268,columnNumber:17},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:264,columnNumber:15},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:255,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:251,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:205,columnNumber:9},this),i.jsxDEV("div",{className:"mt-4",children:i.jsxDEV("button",{onClick:J,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 transition-colors duration-200",children:[i.jsxDEV("i",{className:"fa-solid fa-rotate-left mr-2"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:280,columnNumber:13},this)," Reset Filter"]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:276,columnNumber:11},this)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:275,columnNumber:9},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:202,columnNumber:7},this),(n||d)&&i.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 border border-blue-200 dark:border-blue-800",children:[i.jsxDEV("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Siswa"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:289,columnNumber:13},this),i.jsxDEV("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:new Set(m.map(e=>e.userId)).size},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:290,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:288,columnNumber:11},this),i.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 border border-green-200 dark:border-green-800",children:[i.jsxDEV("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Ujian"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:295,columnNumber:13},this),i.jsxDEV("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:m.length},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:296,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:294,columnNumber:11},this),i.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 border border-yellow-200 dark:border-yellow-800",children:[i.jsxDEV("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Rata-rata Nilai"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:301,columnNumber:13},this),i.jsxDEV("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:m.length>0?(m.reduce((e,a)=>e+(parseFloat(a.skor)||0),0)/m.length).toFixed(2):"0.00"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:302,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:300,columnNumber:11},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:287,columnNumber:9},this),i.jsxDEV(ee,{data:m,tabelName:"Laporan Nilai",columns:[{header:"NISN",accessor:"nisn"},{header:"Nama Siswa",accessor:"namaSiswa"},{header:"Kelas",accessor:"jenjang"},{header:"Mata Pelajaran",accessor:"mapel"},{header:"Ujian",accessor:"namaUjian"},{header:"Nilai",accessor:"skor"},{header:"Status",accessor:"status"},{header:"Tanggal",isTime:{mode:"date",withDay:!0},accessor:"createdAt"}],pageSize:15,placeholder:"Cari data...",noDataText:n||d?"Tidak ada data untuk filter yang dipilih":"Pilih filter untuk melihat data",onRowClick:e=>{const a={nisn:e.nisn,nama:e.namaSiswa,ujian:e.namaUjian,totalSoal:e.totalSoal,terjawab:e.terjawab,tidakTerjawab:e.tidakTerjawab,status:e.status,nilai:{benar:e.benar,salah:e.salah,skor:Number(e.skor).toFixed(1)}};D(a)},viewModal:!0,serverPagination:{currentPage:F,lastPage:X,total:(t==null?void 0:t.total)||0,onPageChange:q},serverSearch:{value:u,onChange:j}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:315,columnNumber:7},this),i.jsxDEV(re,{data:S,exclude:["*id","userId","ujianId","jawabanFile","ujian","*mapelId","user"],open:!!S,onClose:()=>D(null)},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:371,columnNumber:7},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:185,columnNumber:5},this)}se.layout=N=>{const t=N.props.activeRole??N.props.user.role;return t=="Staf"?i.jsxDEV(te,{children:N},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:384,columnNumber:12},void 0):t=="Guru"?i.jsxDEV(ne,{children:N},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:387,columnNumber:12},void 0):i.jsxDEV(ie,{children:N},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/Nilai/Index.tsx",lineNumber:390,columnNumber:10},void 0)};export{se as default};
