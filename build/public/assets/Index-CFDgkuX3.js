import{u as k,c as i,j as a,L as d,r as x}from"./app-nMpo0nzv.js";import{D as v}from"./TabelData-Bq0KbQ7x.js";import{N as U}from"./Notification-4m9luinP.js";import{S as A}from"./SuperAdminLayouts--tQhjaE8.js";import{M as T}from"./ModalView-shfRxHOx.js";import{G as E}from"./GuruLayouts-CU16o3kR.js";import{S as M}from"./StafLayouts-D4HfDRrx.js";import"./FormatWaktu-CaIpskCQ.js";import"./Breadcrump-BN6wmIl1.js";function w({bankSoals:n,bankSoalPaginate:t,searchQuery:j="",auth:G}){const{props:c}=k(),[h,f]=i.useState([]),[m,N]=i.useState(),[I,p]=i.useState((t==null?void 0:t.currentPage)||1),[S,R]=i.useState((t==null?void 0:t.lastPage)||1),[D,B]=i.useState(j),s=c.pattern;console.log(n),i.useEffect(()=>{if(!n)return;let e=[];n.map(r=>{var l,o,u;e.push({...r,id:r.id,jurusan:((l=r.jurusanDetails)==null?void 0:l.join(", "))||"-",penulis:((o=r.penulisDetails)==null?void 0:o.join(", "))||"-",mapel:((u=r.mapelDetails)==null?void 0:u.join(", "))||"-",kode:r.kode||"-"})}),e.sort((r,l)=>{const o=new Date(r.tanggalUjian).getTime(),u=new Date(l.tanggalUjian).getTime();return u!==o?u-o:Number(r.jenjang)-Number(l.jenjang)}),f(e)},[n]);const g=e=>{x.get(String(s),{page:e},{preserveState:!0,replace:!0}),p(e)},b=e=>{B(e),x.get(String(s),{page:1,search:e},{preserveState:!0,replace:!0,preserveScroll:!0}),p(1)};return a.jsxDEV("div",{className:"max-w-7xl mx-auto lg:p-6",children:[a.jsxDEV(U,{},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:88,columnNumber:7},this),a.jsxDEV("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[a.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Data Bank Soal"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:90,columnNumber:9},this),a.jsxDEV("div",{className:"flex gap-1 items-center",children:[a.jsxDEV(d,{href:`${s}/create`,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Tambah Bank Soal"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:92,columnNumber:11},this),c.auth.role=="SuperAdmin"&&a.jsxDEV(d,{href:`${s}/data-password`,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Data Password"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:99,columnNumber:13},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:91,columnNumber:9},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:89,columnNumber:7},this),a.jsxDEV(v,{data:h,tabelName:"BankSoal",columns:[{header:"Jenis Ujian",accessor:"jenisUjian"},{header:"Nama Ujian",accessor:"namaUjian"},{header:"Kode Ujian",accessor:"kode"},{header:"Jenjang",accessor:"jenjang"},{header:"Mata Pelajaran",accessor:"mapel"},{header:"Jurusan",accessor:"jurusan"},{header:"Penulis",accessor:"penulis"},{header:"Waktu (menit)",accessor:"waktu"},{header:"Tanggal Ujian",isTime:{mode:"date",withDay:!0},accessor:"tanggalUjian"},{header:"Aksi",accessor:"actions",action:e=>a.jsxDEV(d,{className:"text-blue-600 font-bold hover:underline text-nowrap",href:`${s}/${e.id}/edit-soal`,children:"Edit Soal"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:130,columnNumber:15},this)}],editable:String(s),pageSize:15,placeholder:"Cari bank soal berdasarkan kode, nama ujian, jenjang, atau jenis ujian...",noDataText:"Tidak ada data bank soal",disableConfig:{canEdit:()=>!0,canDelete:()=>!0,canView:()=>!0,disabledMessage:"Guru hanya dapat mengubah Ujian Mandiri yang dibuat sendiri"},onRowClick:e=>N(()=>{var r;return{...e,mapel:(r=e.mapelDetails)==null?void 0:r[0],diBuat:e.createdAt,diUpdate:e.updatedAt}}),serverPagination:{currentPage:I,lastPage:S,total:(t==null?void 0:t.total)||0,onPageChange:g},serverSearch:{value:D,onChange:b}},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:109,columnNumber:7},this),a.jsxDEV(T,{data:m,exclude:["*id","soalFile","jurusanDetails","penulisDetails","mapelDetails","mapelId","createdAt","updatedAt","jurusan","penulis","mapel"],open:!!m,onClose:()=>N(null),title:"Detail Bank Soal"},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:173,columnNumber:7},this)]},void 0,!0,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:87,columnNumber:5},this)}w.layout=n=>{const t=n.props.activeRole??n.props.user.role;return t=="Guru"?a.jsxDEV(E,{children:n},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:199,columnNumber:12},void 0):t=="Staf"?a.jsxDEV(M,{children:n},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:202,columnNumber:12},void 0):a.jsxDEV(A,{children:n},void 0,!1,{fileName:"G:/Bank Project/2026/SMK-BINA-INDUSTRI/inertia/pages/BankSoal/Index.tsx",lineNumber:205,columnNumber:10},void 0)};export{w as default};
